---
version: 5
defaults:
  datadir: "/tmp/shinesolutions/packer-aem/hieradata"
  data_hash: yaml_data
hierarchy:
  - name: Hiera Data
    paths: 
      - aws.yaml
      - docker.yaml
      - author-publish-dispatcher.yaml
      - local.yaml
      - "%{::os.family}/%{::os.name}-%{::os.release.major}.yaml"
      - "%{::os.family}/%{::os.name}.yaml"
      - "%{::platform_type}.yaml"
      - "%{::component}.yaml"
      - common.yaml

  - name: "AWS Parameter Store"
    lookup_key: hiera_ssm_paramstore
    uris:
      - /
      - /hiera/%{facts.os.family}/
    options:
      region: ap-southeast-2
      get_all: false
